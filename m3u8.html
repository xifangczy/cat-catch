<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>猫抓 M3U8解析器</title>
    <link rel="stylesheet" type="text/css" href="css/options.css" media="all" />
    <script src="js/jquery.min.js"></script>
    <script src="js/init.js"></script>
    <script src="js/firefox.js"></script>
    <script src="js/m3u8.js"></script>
  </head>

  <body>
    <div class="m3u8_wrapper">

      <section id="getURL" class="hide">
        <h1 class="optionsTitle">m3u8解析器</h1>
        <span class="explain">如果填入非m3u8文件, 解析器会尝试修改referer后下载文件</span>
        <div  class="optionBox">
          <input type="text" id="url" placeholder="请输入 URL" style="width: 965px;margin: 5px;"/>
          <input type="text" id="referer" placeholder="请输入 请求头referer参数" style="width: 965px;margin: 5px;"/>
          <button id="getURL_btn" type="button">获取</button>
        </div>
      </section>

      <section id="downfile" class="hide">
        <h1 class="optionsTitle">修改Referer 下载</h1>
        <div class="optionBox">
          <div id="downFilepProgress"></div>
          <div class="progress-bar">
            <div class="progress"></div>
          </div>
          <button id="historyBack" type="button">返回上一页</button>
        </div>
      </section>

      <section id="loading">
        <div class="optionBox">
          文件载入中...
        </div>
      </section>

      <section id="more_m3u8" class="hide">
        <h1 class="optionsTitle">下一级文件</h1>
        <span class="explain">该m3u8文件中嵌套多个m3u8文件</span>
        <div class="optionBox">
          <div id="next_m3u8"></div>
        </div>
      </section>

      <section id="m3u8" class="hide">
        <h1 class="optionsTitle">m3u8解析</h1>
        <span class="explain" id="key"></span>
        <div class="optionBox">
          <div class="block">
            m3u8文件地址
            <p><a id="m3u8_url"></a></p>
          </div>
          
          <div class="block hide" id="tips">
            该媒体已加密, 请注意加密信息 <br>
          </div>

          <div class="block">
            <p id="count"></p>
          </div>
          
          <div class="block" id="textarea">
            <textarea rows="50" cols="160" id="media_file" spellcheck="false"></textarea>
          </div>

          <div class="block" id="button">
            <button id="DownText">下载显示的内容</button>
            <button id="UrlDecode">Url解码</button>
            <input type="text" value='wget "$url$"' id="formatStr" spellcheck="false" />
            <button id="format">自定义格式化</button>
            <button id="originalM3U8">原始m3u8</button>
            <button id="DownFixm3u8">本地m3u8</button>
            <button id="Refresh">提取ts</button>
            <button id="play" data-switch="on">播放m3u8</button>
            <button id="catch" data-switch="on">开启捕获</button>
            <br>
            <div style="display: inline;" id="threadDiv">下载线程数 <input type="number" value="32" id="thread" spellcheck="false" style="width: 35px;"/></div>
            <button id="AllDownload">在线下载合并ts</button> 
            <button id="ForceDownload" class="hide">强制下载已有数据</button> <button id="m3u8DL">调用N_m3u8DL-CLI下载</button>
            <div style="display: flex;"><div id="progress"></div> <div id="fileSize"></div></div>

            <div class="block hide" id="errorTsList"></div>

            <div class="ffmpeg">ffmpeg合并ts命令: <p>ffmpeg -i xxx.m3u8 -vcodec copy -acodec copy xxx.mp4</p></div>
          </div>

        </div>
      </div>
      </section>
      <video id="video" class="hide"></video>
    </div>
    <script src="js/m3u8-decrypt.js"></script>
    <script src="js/hls.min.js"></script>
  </body>
</html>
